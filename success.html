<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Order Successful — Flavour Hub Shawarma</title>

<style>
:root{
  --ink:#0f172a;
  --muted:#64748b;
  --line:#e2e8f0;
  --soft:#f8fafc;
  --ok:#16a34a;
  --ok2:#22c55e;
  --brand:#ef4444;
  --brand2:#f97316;
  --radius:22px;
  --shadow:0 16px 40px rgba(2,6,23,.08);
  --max:900px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--soft);
  color:var(--ink);
}
header{
  background:#fff;
  border-bottom:1px solid var(--line);
}
.top{
  max-width:var(--max);
  margin:auto;
  padding:16px;
  display:flex;
  gap:12px;
  align-items:center;
}
.logo{
  width:44px;height:44px;
  border-radius:14px;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  display:grid;
  place-items:center;
  color:#fff;
  font-weight:900;
}
.wrap{
  max-width:var(--max);
  margin:auto;
  padding:20px 16px 40px;
}
.card{
  background:#fff;
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.hero{
  padding:20px;
  background:linear-gradient(135deg,rgba(34,197,94,.12),rgba(34,197,94,.06));
  border-bottom:1px solid var(--line);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}
.badge{
  background:rgba(34,197,94,.15);
  border:1px solid rgba(34,197,94,.3);
  color:#14532d;
  padding:8px 12px;
  border-radius:999px;
  font-weight:900;
  font-size:12px;
}
.body{
  padding:18px;
}
.row{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-bottom:8px;
}
.items{
  margin-top:14px;
  border-top:1px dashed var(--line);
  padding-top:12px;
}
.item{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-bottom:6px;
}
.total{
  margin-top:14px;
  font-size:16px;
  font-weight:900;
  display:flex;
  justify-content:space-between;
}
.actions{
  margin-top:18px;
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}
.btn{
  flex:1;
  border:none;
  border-radius:14px;
  padding:12px 16px;
  font-weight:900;
  cursor:pointer;
}
.btn.whatsapp{
  background:linear-gradient(135deg,var(--ok),var(--ok2));
  color:#fff;
}
.btn.back{
  background:#fff;
  border:1px solid var(--line);
}
footer{
  margin-top:14px;
  text-align:center;
  color:var(--muted);
  font-size:12px;
}
</style>
</head>

<body>

<header>
  <div class="top">
    <div class="logo">FH</div>
    <div>
      <strong>Flavour Hub Shawarma</strong><br>
      <span style="font-size:12px;color:#64748b">Order confirmation</span>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <div class="hero">
      <div>
        <h2 style="margin:0">Payment Successful</h2>
        <p style="margin:6px 0 0;color:#64748b;font-size:13px">
          Your payment has been verified successfully.
        </p>
      </div>
      <div class="badge">PAID</div>
    </div>

    <div class="body">
      <div class="row"><span>Reference</span><strong id="ref">—</strong></div>
      <div class="row"><span>Order Type</span><strong id="mode">—</strong></div>

      <div class="items" id="items"></div>

      <div class="total">
        <span>Total Paid</span>
        <span id="total">GHS 0.00</span>
      </div>

      <div class="actions">
        <button class="btn back" onclick="location.href='index.html'">
          Back to Menu
        </button>
        <button class="btn whatsapp" id="waBtn">
          Send Order to WhatsApp
        </button>
      </div>

      <footer>
        © <span id="year"></span> Flavour Hub Shawarma
      </footer>
    </div>
  </div>
</div>

<script>
const WHATSAPP_LOCAL = "0543748208";
const GH = "233";

function formatGH(n){
  n = n.replace(/\D/g,"");
  if(n.startsWith("0")) return GH + n.slice(1);
  if(n.startsWith(GH)) return n;
  return GH + n;
}

const waNumber = formatGH(WHATSAPP_LOCAL);
const order = JSON.parse(localStorage.getItem("fh_last_paid_order") || "{}");

document.getElementById("year").textContent = new Date().getFullYear();
document.getElementById("ref").textContent = order.reference || "—";
document.getElementById("mode").textContent = order.mode || "—";
document.getElementById("total").textContent =
  order.totals ? `GHS ${order.totals.total.toFixed(2)}` : "GHS 0.00";

const itemsBox = document.getElementById("items");
if(order.items){
  order.items.forEach(i=>{
    const d = document.createElement("div");
    d.className = "item";
    d.innerHTML = `<span>${i.name} × ${i.qty}</span><strong>GHS ${(i.qty*i.unit_price).toFixed(2)}</strong>`;
    itemsBox.appendChild(d);
  });
}

document.getElementById("waBtn").onclick = () => {
  const lines = [
    "*Flavour Hub Shawarma — PAID ORDER*",
    `Reference: ${order.reference}`,
    `Order type: ${order.mode}`,
    "------------------------"
  ];
  order.items?.forEach(i=>{
    lines.push(`- ${i.name} x${i.qty}`);
  });
  lines.push("------------------------");
  lines.push(`Total: GHS ${order.totals?.total}`);
  window.location.href =
    `https://wa.me/${waNumber}?text=${encodeURIComponent(lines.join("\n"))}`;
};
</script>

</body>
</html>
